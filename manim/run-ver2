#!/bin/bash -x 
# ./run "Custom hex color" "#ffcc00"
rm -rf media

folder=${folder:-none}

colors=(red blue green purple cyan magenta yellow orange)
COLOR_DEFAULT="${colors[RANDOM % ${#colors[@]}]}"

docker run --rm \
  -v "$(pwd)":/manim \
  -u "$(id -u)":"$(id -g)" \
  -e TEXT="${1:-Hello 1from Manim!}" \
  -e COLOR="${2:-$COLOR_DEFAULT}" \
  manimcommunity/manim \
   manim -ql -t -o text_alpha.webm ./ver2.py TextScene
#  manim -ql ./text_scene.py TextScene


  ffmpeg1(){

  cd media/videos/text_scene/480p15
  pwd
  ffmpeg -i /home/node/tts/background/back-45.mp4 -i text_alpha.webm \
  -filter_complex "[1:v]scale=1920:-1[fg];[0:v][fg]overlay=0:0:format=auto" \
  -c:v libx264 -pix_fmt yuv420p -c:a copy back-for-before.mp4 -y
  cp -a back-for-before.mp4 /home/node/tts/$folder/

  }
  #ffmpeg1
